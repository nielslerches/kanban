(this.webpackJsonpkanban=this.webpackJsonpkanban||[]).push([[0],{160:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(18),o=a.n(c),l=a(19),i=a(10),u=a(15),s=(a(68),a(69),a(8)),d=a(56),p=a.n(d),m=a(171),b=a(172),f=a(173),j=a(28),E=a(167),g=a(164),y=a(168),v=a(169),O=a(170),h=a(166),w=a(174),P=a(175),D=a(176),k=a(177),S=a(182),C=a(178),x=a(179),I=a(9),A=a(21),T=a.n(A),B=a(38),N=a.n(B);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){Object(I.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=Object(r.createContext)(),L=function(e,t){var a=function(t){return t||(t=function(){return!0}),e.dashboards.ids.map((function(t){return e.dashboards.data[t]})).map((function(e){return _({},e,{slug:N()(e.name,{lower:!0}),panels:r((function(t){return e.panels.map((function(e){return e.panelId})).includes(t.id)}))})})).filter(t)},r=function(t){return t||(t=function(){return!0}),e.panels.ids.map((function(t){return e.panels.data[t]})).filter(t)},n=function(t){return t||(t=function(){return!0}),e.projects.ids.map((function(t){return e.projects.data[t]})).map((function(e){return _({},e,{slug:N()(e.name,{lower:!0}),columns:c((function(t){return t.projectId===e.id}))})})).filter(t)},c=function(t){return t||(t=function(){return!0}),e.columns.ids.map((function(t){return e.columns.data[t]})).sort((function(e,t){return e.ordering-t.ordering})).filter(t)};return{getDashboards:a,getPanels:r,getDashboardBySlug:function(e){return a((function(t){return t.slug===e}))[0]},getDefaultDashboard:function(){return a((function(t){return t.id===e.keyValue["default-dashboard"]}))[0]},getProjects:n,getProjectById:function(e){return n((function(t){return t.id===e}))[0]},getProjectBySlug:function(e){return n((function(t){return t.slug===e}))[0]},createProject:function(e,a){var r=T()();return t({type:"CREATE_PROJECT",payload:{id:r,name:e,description:a}}),r},editProject:function(e,a,r){t({type:"EDIT_PROJECT",payload:{id:e,name:a,description:r}})},getColumns:c,createColumn:function(e,a){var r=T()(),n=c((function(e){return e.projectId===a})).length;return t({type:"CREATE_COLUMN",payload:{id:r,name:e,projectId:a,ordering:n}}),r}}},V=function(){return Object(r.useContext)(J)},U={"dashboards-dashboard-view":function(e){return"/dashboards/dashboard/view/".concat(e)},"projects-project-view":function(e){return"/projects/project/view/".concat(e)},"projects-projects-view":"/projects/projects/view","projects-project-create":"/projects/project/create","projects-project-edit":function(e){return"/projects/project/edit/".concat(e)},"projects-workboard-view":function(e){return"/projects/workboard/view/".concat(e)}},W=function(e){var t=U[e];if(!t)throw new Error("unknown view with name ".concat(e));if("function"===typeof t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.apply(void 0,r)}return t},F=a(161),H=a(162),K=a(163),M=a(165);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var $=function(e){var t=e.data,a=e.spec,c=e.onSubmit,o=e.submitText,l=e.children,i=Object(r.useReducer)((function(e,t){var a=t.key,r=t.value;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){Object(I.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(I.a)({},a,r))}),t),u=Object(j.a)(i,2),s=u[0],d=u[1],p=function(e){var t=!0,r=!1,n=void 0;try{for(var c,o=a.filter((function(e){return e.validate}))[Symbol.iterator]();!(t=(c=o.next()).done);t=!0){var l=c.value,i=l.key;if(!(0,l.validate)(e[i]))return!1}}catch(u){r=!0,n=u}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return!0};return n.a.createElement(F.a,{onSubmit:function(e){e.preventDefault(),p(s)&&c(s)}},a.map((function(e){var a=e.key,r=e.label,c=e.type,o=e.props;return n.a.createElement(H.a,{key:a,row:!0},n.a.createElement(K.a,{for:a,sm:2,className:"text-right"},r),n.a.createElement(g.a,{sm:10},n.a.createElement(M.a,Object.assign({type:c,id:a,name:a,value:s[a],onChange:function(e){return d({key:a,value:e.target.value})},placeholder:t[a]||r},o||{}))))})),n.a.createElement(H.a,{className:"text-right"},l,n.a.createElement(h.a,{disabled:!p(s),color:"primary",className:"ml-3"},o)))},q=function(e){var t=e.slug,a=e.children,r=(0,V().getProjectBySlug)(t).name;return n.a.createElement(E.a,null,n.a.createElement(g.a,{md:"2"},n.a.createElement(y.a,{vertical:!0},n.a.createElement(v.a,null,n.a.createElement(O.a,{tag:i.b,to:W("projects-project-view",t)},r)),n.a.createElement(v.a,null,n.a.createElement(O.a,{tag:i.b,to:W("projects-workboard-view",t)},"Workboard")))),n.a.createElement(g.a,{md:"10"},n.a.createElement(s.d,null,a)))},z=function(){var e=(0,V().getProjects)().slice(0,3);return n.a.createElement(m.a,null,n.a.createElement(b.a,{className:"d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Projects"),n.a.createElement(h.a,{tag:i.b,to:W("projects-projects-view")},"View all")),e.length>0&&n.a.createElement(f.a,null,n.a.createElement(w.a,{flush:!0},e.map((function(e){return n.a.createElement(P.a,{key:e.id,tag:i.b,to:W("projects-project-view",e.slug)},e.name)})))))},G=function(){var e=Object(l.d)(),t=Object(s.g)(),a=V(),r=a.createProject,c=(0,a.getDefaultDashboard)();return n.a.createElement(m.a,null,n.a.createElement(b.a,null,"Create project"),n.a.createElement(f.a,null,n.a.createElement(D.a,null,n.a.createElement($,{data:{name:"",description:""},spec:[{key:"name",label:"Name",type:"text",validate:Boolean},{key:"description",label:"Description",type:"textarea",validate:Boolean,props:{rows:10}}],onSubmit:function(a){var n=a.name,c=a.description,o=r(n,c),l=(0,L(e.getState(),e.dispatch).getProjectById)(o);t.push(W("projects-project-view",l.slug))},submitText:"Create new project"},n.a.createElement(h.a,{tag:i.b,to:W("dashboards-dashboard-view",c.slug)},"Cancel")))))},Q=function(e){var t=e.name,a=e.description,r=e.slug;return n.a.createElement(q,{slug:r},n.a.createElement(E.a,null,n.a.createElement(g.a,{md:"10"},n.a.createElement(m.a,null,n.a.createElement(b.a,null,t),n.a.createElement(f.a,null,n.a.createElement(D.a,null,"string"===typeof a?n.a.createElement(k.a,null,a):a)))),n.a.createElement(g.a,{md:"2"},n.a.createElement(y.a,{vertical:!0},n.a.createElement(O.a,{tag:i.b,to:W("projects-project-edit",r)},"Edit details")))))},X=function(e){var t=e.slug,a=Object(l.d)(),r=Object(s.g)(),c=V(),o=c.editProject,u=(0,c.getProjectBySlug)(t),d=u.id,p=u.name,j=u.description;return n.a.createElement(m.a,null,n.a.createElement(b.a,null,"Edit project"),n.a.createElement(f.a,null,n.a.createElement(D.a,null,n.a.createElement($,{data:{name:p,description:j},spec:[{key:"name",label:"Name",type:"text",validate:Boolean},{key:"description",label:"Description",type:"textarea",validate:Boolean,props:{rows:10}}],onSubmit:function(e){var t=e.name,n=e.description;o(d,t,n);var c=(0,L(a.getState(),a.dispatch).getProjectById)(d);r.push(W("projects-project-view",c.slug))},submitText:"Save changes"},n.a.createElement(h.a,{tag:i.b,to:W("projects-project-view",t)},"Cancel")))))},Z=function(e){var t=e.slug,a=Object(r.useState)(!1),c=Object(j.a)(a,2),o=c[0],l=c[1],i=V(),u=i.createColumn,s=i.getProjectBySlug,d=function(){return l((function(e){return!e}))},p=s(t),y=p.id,v=p.columns;return n.a.createElement(q,{slug:t},n.a.createElement(E.a,null,v.map((function(e){return n.a.createElement(g.a,{md:"2",key:e.id},n.a.createElement(m.a,null,n.a.createElement(b.a,null,e.name),n.a.createElement(f.a,null,n.a.createElement(m.a,null,n.a.createElement(f.a,null,n.a.createElement(k.a,null,"Foobar!!"))))))}))),n.a.createElement(S.a,{isOpen:o,toggle:d},n.a.createElement(C.a,{toggle:d},"Create column"),n.a.createElement(x.a,null,n.a.createElement($,{data:{name:""},spec:[{key:"name",label:"Name",type:"text",validate:Boolean}],onSubmit:function(e){var t=e.name;u(t,y),d()},submitText:"Create column"}))))},ee=function(e){var t=e.name,a=e.children;return n.a.createElement(m.a,null,n.a.createElement(b.a,null,t),n.a.createElement(f.a,null,a))},te={text:function(e){var t=e.name,a=e.data;return n.a.createElement(ee,{name:t},a)},projects:z},ae=function(e){var t=e.name,a=e.type,r=e.data,c=te[a];return n.a.createElement(c,{name:t,data:r})},re=function(e){return n.a.createElement(O.a,Object.assign({tag:i.c},e))},ne=function(e){var t=e.children,a=(0,V().getDashboards)();return n.a.createElement(E.a,null,n.a.createElement(g.a,{md:"2"},n.a.createElement(y.a,{vertical:!0},a.map((function(e){return n.a.createElement(v.a,{key:e.id},n.a.createElement(re,{to:W("dashboards-dashboard-view",e.slug)},e.name))}))),n.a.createElement("hr",null),n.a.createElement(y.a,{vertical:!0},n.a.createElement(v.a,null,n.a.createElement(re,{to:W("projects-projects-view")},"Projects")))),n.a.createElement(g.a,{md:"10"},t))},ce=function(e){var t=e.panels;return n.a.createElement(ne,null,t.map((function(e){return n.a.createElement(ae,{key:e.id,name:e.name,type:e.type,data:e.data})})))},oe=a(180),le=a(181);var ie=function(){var e=V(),t=e.getDashboardBySlug,a=e.getDefaultDashboard,r=e.getProjectBySlug,c=a();return n.a.createElement(n.a.Fragment,null,n.a.createElement(oe.a,{color:"dark",dark:!0,expand:"md"},n.a.createElement(le.a,{tag:i.b,to:"/"},"kanban")),n.a.createElement(D.a,{fluid:!0,className:"py-3"},n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:function(){return n.a.createElement(s.a,{to:W("dashboards-dashboard-view",c.slug)})}}),n.a.createElement(s.b,{exact:!0,path:W("dashboards-dashboard-view",":slug"),component:function(e){var a=e.match.params.slug,r=t(a).panels;return n.a.createElement(ce,{panels:r})}}),n.a.createElement(s.b,{exact:!0,path:W("projects-projects-view"),component:z}),n.a.createElement(s.b,{exact:!0,path:W("projects-project-create"),component:G}),n.a.createElement(s.b,{exact:!0,path:W("projects-project-view",":slug"),component:function(e){var t=e.match.params.slug,a=r(t),c=a.id,o=a.name,l=a.description,i=a.columns;return n.a.createElement(Q,{id:c,name:o,description:n.a.createElement(p.a,{source:l}),slug:t,columns:i})}}),n.a.createElement(s.b,{exact:!0,path:W("projects-project-edit",":slug"),component:function(e){var t=e.match.params.slug;return n.a.createElement(X,{slug:t})}}),n.a.createElement(s.b,{exact:!0,path:W("projects-workboard-view",":slug"),component:function(e){var t=e.match.params.slug;return n.a.createElement(Z,{slug:t})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(13),se=a(41),de={data:{},ids:[]};function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){Object(I.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var be={data:{},ids:[]},fe=Object(u.b)(be,{CREATE_PANEL:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.type,o=a.data;e.data[r]={id:r,name:n,type:c,data:o},e.ids.push(r)}}),je={};function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var ge=Object(u.b)(je,{SET_KEY_VALUE:function(e,t){var a=t.payload,r=a.key,n=a.value;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){Object(I.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(I.a)({},r,n))}}),ye={data:{},ids:[]},ve=Object(u.b)(ye,{CREATE_PROJECT:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.description;e.data[r]={id:r,name:n,description:c},e.ids.push(r)},EDIT_PROJECT:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.description;e.data[r].name=n,e.data[r].description=c}}),Oe={data:{},ids:[]},he=Object(u.b)(Oe,{CREATE_COLUMN:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.projectId,o=a.ordering;e.data[r]={id:r,name:n,projectId:c,ordering:o},e.ids.push(r)}}),we=Object(ue.combineReducers)({dashboards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATE_DASHBOARD":return me({},e,{data:me({},e.data,Object(I.a)({},r.id,{id:r.id,name:r.name,panels:[]})),ids:[].concat(Object(se.a)(e.ids),[r.id])});case"ADD_PANEL":return me({},e,{data:me({},e.data,Object(I.a)({},r.dashboardId,me({},e.data[r.dashboardId],{panels:[].concat(Object(se.a)(e.data[r.dashboardId].panels),[{ordering:e.data[r.dashboardId].panels.length,panelId:r.panelId}])})))});default:return e}},panels:fe,keyValue:ge,projects:ve,columns:he}),Pe={dashboards:de,panels:be,keyValue:je,projects:ye,columns:Oe},De=JSON.parse(localStorage.getItem("state")),ke=Object(u.a)({reducer:we,preloadedState:De||Pe,middleware:Object(u.c)(),devTools:!1});if(ke.subscribe((function(){localStorage.setItem("state",JSON.stringify(ke.getState()))})),!De){var Se=T()(),Ce=T()();ke.dispatch({type:"CREATE_DASHBOARD",payload:{id:Se,name:"Dashboard"}}),ke.dispatch({type:"SET_KEY_VALUE",payload:{key:"default-dashboard",value:Se}}),ke.dispatch({type:"CREATE_PANEL",payload:{id:Ce,name:"Projects",type:"projects"}}),ke.dispatch({type:"ADD_PANEL",payload:{dashboardId:Se,panelId:Ce}})}o.a.render(n.a.createElement(i.a,null,n.a.createElement(l.a,{store:ke},n.a.createElement((function(e){var t=e.children,a=Object(l.c)((function(e){return e})),r=Object(l.b)(),c=L(a,r);return n.a.createElement(J.Provider,{value:c},t)}),null,n.a.createElement(ie,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){e.exports=a(160)},69:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.866c2381.chunk.js.map