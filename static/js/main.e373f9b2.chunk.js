(this.webpackJsonpkanban=this.webpackJsonpkanban||[]).push([[0],{148:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(25),o=a.n(c),i=a(18),l=a(14),s=a(16),u=(a(63),a(64),a(162)),p=a(160),d=a(163),m=a(158),b=a(164),f=a(165),j=a(7),y=a(50),E=a.n(y),g=a(149),O=a(150),v=a(151),h=a(11),w=a(53),P=a(152),D=a(153),S=a(154),k=a(155),x=a(156),A=a(157),T=a(159),C=a(161),I=a(22),N=a.n(I),B=a(35),R=a.n(B);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=Object(r.createContext)(),V=function(e,t){var a=function(t){return t||(t=function(){return!0}),e.dashboards.ids.map((function(t){return e.dashboards.data[t]})).map((function(e){return J({},e,{slug:R()(e.name,{lower:!0}),panels:r((function(t){return e.panels.map((function(e){return e.panelId})).includes(t.id)}))})})).filter(t)},r=function(t){return t||(t=function(){return!0}),e.panels.ids.map((function(t){return e.panels.data[t]})).filter(t)},n=function(t){return t||(t=function(){return!0}),e.projects.ids.map((function(t){return e.projects.data[t]})).map((function(e){return J({},e,{slug:R()(e.name,{lower:!0})})})).filter(t)};return{getDashboards:a,getPanels:r,getDashboardBySlug:function(e){return a((function(t){return t.slug===e}))[0]},getDefaultDashboard:function(){return a((function(t){return t.id===e.keyValue["default-dashboard"]}))[0]},getProjects:n,getProjectById:function(e){return n((function(t){return t.id===e}))[0]},getProjectBySlug:function(e){return n((function(t){return t.slug===e}))[0]},createProject:function(e,a){var r=N()();return t({type:"CREATE_PROJECT",payload:{id:r,name:e,description:a}}),r},editProject:function(e,a,r){t({type:"EDIT_PROJECT",payload:{id:e,name:a,description:r}})}}},H=function(){return Object(r.useContext)(L)},K={"dashboards-dashboard-view":function(e){return"/dashboards/dashboard/view/".concat(e)},"projects-project-view":function(e){return"/projects/project/view/".concat(e)},"projects-projects-view":"/projects/projects/view","projects-project-create":"/projects/project/create","projects-project-edit":function(e){return"/projects/project/edit/".concat(e)}},U=function(e){var t=K[e];if(!t)throw new Error("unknown view with name ".concat(e));if("function"===typeof t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.apply(void 0,r)}return t};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Y=function(){var e=(0,H().getProjects)();return n.a.createElement(g.a,null,n.a.createElement(O.a,null,"Projects"),e.length>0&&n.a.createElement(v.a,{className:"pb-0"},n.a.createElement(P.a,{flush:!0},e.map((function(e){return n.a.createElement(D.a,{key:e.id,tag:l.b,to:U("projects-project-view",e.slug)},e.name)})))),n.a.createElement(v.a,{className:"text-center"},n.a.createElement(S.a,{tag:l.b,to:U("projects-project-create")},"+ Create project")))},F=function(){return n.a.createElement(Y,null)},$=function(e){var t=e.data,a=e.spec,c=e.onSubmit,o=e.submitText,i=e.children,l=Object(r.useReducer)((function(e,t){var a=t.key,r=t.value;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(h.a)({},a,r))}),t),s=Object(w.a)(l,2),u=s[0],p=s[1],d={},b=!0,f=!1,j=void 0;try{for(var y,E=a.filter((function(e){return e.validate}))[Symbol.iterator]();!(b=(y=E.next()).done);b=!0){var g=y.value,O=g.key,v=g.validate;d[O]=v}}catch(D){f=!0,j=D}finally{try{b||null==E.return||E.return()}finally{if(f)throw j}}var P=function(e){for(var t in d){if(!(0,d[t])(e[t]))return!1}return!0};return n.a.createElement(k.a,{onSubmit:function(e){e.preventDefault(),P(u)&&c(u)}},a.map((function(e){var a=e.key,r=e.label,c=e.type,o=e.props;return n.a.createElement(x.a,{key:a,row:!0},n.a.createElement(A.a,{for:a,sm:2,className:"text-right"},r),n.a.createElement(m.a,{sm:10},n.a.createElement(T.a,Object.assign({type:c,id:a,name:a,value:u[a],onChange:function(e){return p({key:a,value:e.target.value})},placeholder:t[a]||r},o||{}))))})),n.a.createElement(x.a,{className:"text-right"},i,n.a.createElement(S.a,{disabled:!P(u),color:"primary",className:"ml-3"},o)))},q=function(){var e=Object(i.d)(),t=Object(j.g)(),a=H(),r=a.createProject,c=(0,a.getDefaultDashboard)();return n.a.createElement(g.a,null,n.a.createElement(O.a,null,"Create project"),n.a.createElement(v.a,null,n.a.createElement(p.a,null,n.a.createElement($,{data:{name:"",description:""},spec:[{key:"name",label:"Name",type:"text",validate:Boolean},{key:"description",label:"Description",type:"textarea",validate:Boolean,props:{rows:10}}],onSubmit:function(a){var n=a.name,c=a.description,o=r(n,c),i=(0,V(e.getState(),e.dispatch).getProjectById)(o);t.push(U("projects-project-view",i.slug))},submitText:"Create new project"},n.a.createElement(S.a,{tag:l.b,to:U("dashboards-dashboard-view",c.slug)},"Cancel")))))},z=function(e){var t=e.name,a=e.description,r=e.slug;return n.a.createElement(g.a,null,n.a.createElement(O.a,{className:"d-flex position-relative"},t,n.a.createElement(S.a,{outline:!0,color:"secondary",className:"position-absolute",style:{marginTop:-7,right:0,marginRight:5},tag:l.b,to:U("projects-project-edit",r)},"Edit project")),n.a.createElement(v.a,null,n.a.createElement(p.a,null,"string"===typeof a?n.a.createElement(C.a,null,a):a)))},G=function(e){var t=e.id,a=e.name,r=e.description,c=Object(i.d)(),o=Object(j.g)(),s=H(),u=s.editProject,d=(0,s.getDefaultDashboard)();return n.a.createElement(g.a,null,n.a.createElement(O.a,null,"Edit project"),n.a.createElement(v.a,null,n.a.createElement(p.a,null,n.a.createElement($,{data:{name:a,description:r},spec:[{key:"name",label:"Name",type:"text",validate:Boolean},{key:"description",label:"Description",type:"textarea",validate:Boolean,props:{rows:10}}],onSubmit:function(e){var a=e.name,r=e.description;u(t,a,r);var n=(0,V(c.getState(),c.dispatch).getProjectById)(t);o.push(U("projects-project-view",n.slug))},submitText:"Save changes"},n.a.createElement(S.a,{tag:l.b,to:U("dashboards-dashboard-view",d.slug)},"Cancel")))))},M=function(e){var t=e.name,a=e.children;return n.a.createElement(g.a,null,n.a.createElement(O.a,null,t),n.a.createElement(v.a,null,a))},Q={text:function(e){var t=e.name,a=e.data;return n.a.createElement(M,{name:t},a)},projects:Y},X=function(e){var t=e.name,a=e.type,r=e.data,c=Q[a];return n.a.createElement(c,{name:t,data:r})},Z=function(e){var t=e.panels;return n.a.createElement(n.a.Fragment,null,t.map((function(e){return n.a.createElement(X,{key:e.id,name:e.name,type:e.type,data:e.data})})))},ee=function(e){return n.a.createElement(u.a,Object.assign({tag:l.c},e))};var te=function(){var e=H(),t=e.getDashboards,a=e.getDashboardBySlug,r=e.getDefaultDashboard,c=e.getProjectBySlug,o=r(),i=t();return n.a.createElement(p.a,{fluid:!0,className:"my-3"},n.a.createElement(d.a,null,n.a.createElement(m.a,{md:"2"},n.a.createElement(b.a,{vertical:!0},i.map((function(e){return n.a.createElement(f.a,{key:e.id},n.a.createElement(ee,{to:U("dashboards-dashboard-view",e.slug)},e.name))}))),n.a.createElement("hr",null),n.a.createElement(b.a,{vertical:!0},n.a.createElement(f.a,null,n.a.createElement(ee,{to:U("projects-projects-view")},"Projects")))),n.a.createElement(m.a,{md:"10"},n.a.createElement(j.d,null,n.a.createElement(j.b,{exact:!0,path:"/",component:function(){return n.a.createElement(j.a,{to:U("dashboards-dashboard-view",o.slug)})}}),n.a.createElement(j.b,{exact:!0,path:U("dashboards-dashboard-view",":slug"),component:function(e){var t=e.match.params.slug,r=a(t).panels;return n.a.createElement(Z,{panels:r})}}),n.a.createElement(j.b,{exact:!0,path:U("projects-projects-view"),component:F}),n.a.createElement(j.b,{exact:!0,path:U("projects-project-create"),component:q}),n.a.createElement(j.b,{exact:!0,path:U("projects-project-view",":slug"),component:function(e){var t=e.match.params.slug,a=c(t),r=a.name,o=a.description;return n.a.createElement(z,{name:r,description:n.a.createElement(E.a,{source:o}),slug:t})}}),n.a.createElement(j.b,{exact:!0,path:U("projects-project-edit",":slug"),component:function(e){var t=e.match.params.slug,a=c(t),r=a.id,o=a.name,i=a.description;return n.a.createElement(G,{id:r,name:o,description:i})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(10),re=a(38),ne={data:{},ids:[]};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie={data:{},ids:[]},le=Object(s.b)(ie,{CREATE_PANEL:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.type,o=a.data;e.data[r]={id:r,name:n,type:c,data:o},e.ids.push(r)}}),se={};function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var pe=Object(s.b)(se,{SET_KEY_VALUE:function(e,t){var a=t.payload,r=a.key,n=a.value;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(h.a)({},r,n))}}),de={data:{},ids:[]},me=Object(s.b)(de,{CREATE_PROJECT:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.description;e.data[r]={id:r,name:n,description:c},e.ids.push(r)},EDIT_PROJECT:function(e,t){var a=t.payload,r=a.id,n=a.name,c=a.description;e.data[r].name=n,e.data[r].description=c}}),be=Object(ae.combineReducers)({dashboards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATE_DASHBOARD":return oe({},e,{data:oe({},e.data,Object(h.a)({},r.id,{id:r.id,name:r.name,panels:[]})),ids:[].concat(Object(re.a)(e.ids),[r.id])});case"ADD_PANEL":return oe({},e,{data:oe({},e.data,Object(h.a)({},r.dashboardId,oe({},e.data[r.dashboardId],{panels:[].concat(Object(re.a)(e.data[r.dashboardId].panels),[{ordering:e.data[r.dashboardId].panels.length,panelId:r.panelId}])})))});default:return e}},panels:le,keyValue:pe,projects:me}),fe={dashboards:ne,panels:ie,keyValue:se,projects:de},je=JSON.parse(localStorage.getItem("state")),ye=Object(s.a)({reducer:be,preloadedState:je||fe,middleware:Object(s.c)(),devTools:!1});if(ye.subscribe((function(){localStorage.setItem("state",JSON.stringify(ye.getState()))})),!je){var Ee=N()(),ge=N()();ye.dispatch({type:"CREATE_DASHBOARD",payload:{id:Ee,name:"Dashboard"}}),ye.dispatch({type:"SET_KEY_VALUE",payload:{key:"default-dashboard",value:Ee}}),ye.dispatch({type:"CREATE_PANEL",payload:{id:ge,name:"Projects",type:"projects"}}),ye.dispatch({type:"ADD_PANEL",payload:{dashboardId:Ee,panelId:ge}})}o.a.render(n.a.createElement(l.a,null,n.a.createElement(i.a,{store:ye},n.a.createElement((function(e){var t=e.children,a=Object(i.c)((function(e){return e})),r=Object(i.b)(),c=V(a,r);return n.a.createElement(L.Provider,{value:c},t)}),null,n.a.createElement(te,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports=a(148)},64:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.e373f9b2.chunk.js.map